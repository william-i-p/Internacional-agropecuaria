jQuery(document).ready((function(e){var a=e("#aep_config_box");a.find("#ae-config-general").attr("aria-hidden",!1),a.find(".f-row").attr("aria-hidden",!0);aepro.modules;function t(){switch(n("ae_render_mode"),e("#sec-rules").hide(),e('[name="ae_render_mode"]').val()){case"post_type_archive_template":n("ae_rule_post_type_archive"),n("ae_full_override"),n("ae_elementor_template");break;case"post_template":n("ae_preview_post_ID"),n("ae_apply_global"),n("ae_rule_post_type"),n("ae_elementor_template");break;case"archive_template":n("ae_apply_global"),n("ae_rule_taxonomy"),n("ae_full_override"),n("ae_elementor_template"),n("ae_preview_term");break;case"block_layout":n("ae_preview_post_ID");break;case"normal":!function(){n("ae_usage"),usage_area=e('[name="ae_usage"]').val(),"custom"==usage_area&&n("ae_custom_usage_area");""!=usage_area&&(n("ae_apply_global"),auto_apply=e('[name="ae_apply_global"]').is(":checked"),auto_apply||(e("li.ae-rules").show(),n("ae_hook_apply_on[]"),page_types=e("input[name='ae_hook_apply_on[]']:checked").map((function(){return this.value})).get(),page_types.indexOf("single")>=0&&(n("ae_hook_post_types[]"),n("ae_hook_posts_selected"),n("ae_hook_posts_excluded")),page_types.indexOf("archive")>=0&&(n("ae_hook_taxonomies[]"),n("ae_hook_terms_selected"),n("ae_hook_terms_excluded"))))}();break;case"404":case"search":n("ae_elementor_template");break;case"author_template":n("ae_apply_global"),n("ae_elementor_template"),n("ae_preview_author");break;case"date_template":n("ae_elementor_template");break;case"acf_repeater_layout":!function(){n("ae_acf_field_type"),n("ae_repeater_loc"),repeater_loc=e('[name="ae_repeater_loc"]').val(),"post"==repeater_loc&&n("ae_preview_post_ID");$field_type=e('[name="ae_acf_field_type"]').val(),("repeater"===$field_type||""===$field_type)&&n("ae_acf_repeater_name");"flexible_content"===$field_type&&n("ae_acf_flexible_name")}()}}function n(a){e('[name="'+a+'"]').closest(".f-row").attr("aria-hidden",!1)}t(),jQuery("#ae_preview_post_ID").aeselect2({ajax:{url:ajaxurl,dataType:"json",data:function(e){return render_mode=jQuery('[name="ae_render_mode"]').val(),"block_layout"!=render_mode&&"acf_repeater_layout"!=render_mode?post_type=jQuery("#ae_rule_post_type").val():post_type="any",{q:e.term,action:"ae_prev_post",post_type:post_type,nonce:aepro.aep_nonce}},processResults:function(e){return{results:e.data}}},minimumInputLength:2}),jQuery("#ae_preview_term").aeselect2({ajax:{url:ajaxurl,dataType:"json",data:function(e){return taxonomy=jQuery("#ae_rule_taxonomy").val(),{q:e.term,action:"ae_prev_term",taxonomy:taxonomy,nonce:aepro.aep_nonce}},processResults:function(e){return{results:e.data}}},minimumInputLength:2}),jQuery("#ae_preview_post_ID, #ae_repeater_loc, #ae_acf_field_type").on("change",(function(){render_mode=e('[name="ae_render_mode"]').val(),"acf_repeater_layout"==render_mode&&(id=jQuery("#ae_preview_post_ID").val(),repeater_loc=jQuery("#ae_repeater_loc").val(),field_type=jQuery("#ae_acf_field_type").val(),"repeater"!=field_type&&""!=field_type||jQuery.ajax({url:ajaxurl,dataType:"json",data:{action:"ae_acf_repeater_fields",post_id:id,repeater_loc:repeater_loc,nonce:aepro.aep_nonce},success:function(e){jQuery("#ae_acf_repeater_name").find("option").remove().end(),e.data.length&&jQuery.each(e.data,(function(e,a){jQuery("#ae_acf_repeater_name").append(jQuery("<option/>",{value:a.id,text:a.text}))}))}}),"flexible_content"==field_type&&jQuery.ajax({url:ajaxurl,dataType:"json",data:{action:"ae_acf_flexible_fields",post_id:id,repeater_loc:repeater_loc,field_type:field_type,nonce:aepro.aep_nonce},success:function(e){jQuery("#ae_acf_flexible_name").find("option").remove().end(),e.data.length&&jQuery.each(e.data,(function(e,a){jQuery("#ae_acf_flexible_name").append(jQuery("<option/>",{value:a.id,text:a.text}))}))}}))})),function(){if(null===document.querySelector(".aep-wrap"))return;const a=document.querySelector("#aep-select-all"),t=document.querySelectorAll(".aep-module-action"),n=document.querySelector("#aep-apply"),o=document.querySelector("#save-license"),l=document.querySelector("#save-config");document.querySelectorAll(".aep-tabs .aep-title a").forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault();const a=document.querySelectorAll(".aep-tabs .aep-title"),t=e.target.dataset.tabid;a.forEach(e=>e.classList.remove("active")),e.target.parentElement.classList.add("active"),console.log("#"+t),document.querySelectorAll(".aep-tab-content").forEach(e=>e.classList.remove("active")),document.querySelector("#"+t).classList.add("active")}))}),a.addEventListener("change",(function(e){const a=document.querySelectorAll(".aep-module-item");this.checked?a.forEach((function(e){e.checked=!0})):a.forEach((function(e){e.checked=!1}))})),t.forEach((function(a){a.addEventListener("click",(function(a){a.stopPropagation(),a.preventDefault();const t=a.target,n=t.dataset.moduleid,o=t.dataset.action;let l={};l[n]=o,t.classList.add("updating"),e.ajax({url:ajaxurl,method:"post",data:{action:"aep_module",moduleData:l},success:function(e){const a=e.modules;for(module in a)if(a.hasOwnProperty(module)){let e=a[module],t=document.querySelector(`[data-moduleid='${module}']`);if(null===t)continue;!1===e?(t.textContent="Activate",t.dataset.action="activate",t.parentElement.parentElement.classList.remove("aep-enabled"),t.parentElement.parentElement.classList.add("aep-disabled")):(t.textContent="Deactivate",t.dataset.action="deactivate",t.parentElement.parentElement.classList.add("aep-enabled"),t.parentElement.parentElement.classList.remove("aep-disabled")),t.classList.remove("updating"),moduleCBs=document.querySelectorAll(".aep-module-item"),moduleCBs.forEach(e=>e.checked=!1)}}})}))})),n.addEventListener("click",(function(a){const t=document.querySelector('[name="aep-bulk-action"]').value,n={};""!==t?(document.querySelectorAll(".aep-module-item").forEach((function(e){e.checked&&(n[e.value]=t,e.nextSibling.nextSibling.children[0].hasAttribute("data-moduleid")&&e.nextSibling.nextSibling.children[0].classList.add("updating"))})),0!==Object.keys(n).length?e.ajax({url:ajaxurl,method:"post",data:{action:"aep_module",moduleData:n},success:function(e){const a=e.modules;for(module in a)if(a.hasOwnProperty(module)){const e=a[module],t=document.querySelector(`[data-moduleid='${module}']`);if(null===t)continue;!1===e?(t.textContent="Activate",t.dataset.action="activate",t.parentElement.parentElement.classList.remove("aep-enabled"),t.parentElement.parentElement.classList.add("aep-disabled")):(t.textContent="Deactivate",t.dataset.action="deactivate",t.parentElement.parentElement.classList.remove("aep-disabled"),t.parentElement.parentElement.classList.add("aep-enabled")),t.classList.remove("updating"),moduleCBs=document.querySelectorAll(".aep-module-item"),moduleCBs.forEach(e=>e.checked=!1)}}}):alert("Please select atleast one module")):alert("Please select an action")})),o.addEventListener("click",(function(a){const t=document.querySelector("#aep-license").value,n=this.dataset.action,o=document.querySelector(".aep-license-box"),l=document.querySelector(".aep-license-msg"),c=document.querySelector("#aep_license_nonce").value,r=this;if(l.textContent="",""===t)return void alert("Please enter the license key");r.classList.add("loading");const i={action:"ae_activate_license",license_key:t,license_action:n,nonce:c};e.ajax({method:"POST",url:ajaxurl,dataType:"json",data:i,success:function(e){if(!1===e.action)l.textContent=e.message;else if("activate"==n){o.classList.add("aep-active"),document.querySelector(".aep-license-box .aep-action-text").textContent="Deactivate",r.dataset.action="deactivate",document.querySelector("#aep-license").disabled=!0;const e=document.querySelector(".aep-license-error");e&&e.remove()}else o.classList.remove("aep-active"),document.querySelector(".aep-license-box .aep-action-text").textContent="Activate",r.dataset.action="activate",document.querySelector("#aep-license").value="",document.querySelector("#aep-license").disabled=!1;r.classList.remove("loading")}})})),l.addEventListener("click",(function(a){const t=document.querySelector("#ae_pro_gmap_api").value,n=this;n.classList.add("loading"),e.ajax({url:ajaxurl,method:"post",data:{action:"aep_save_config",config:{ae_pro_gmap_api:t},nonce:aepro.aep_nonce},success:function(e){n.classList.remove("loading")}})}))}(),jQuery(document).on("change",'[name="ae_apply_global"], [name="ae_render_mode"], [name="ae_hook_apply_on[]"], [name="ae_usage"], [name="ae_repeater_loc"], [name="ae_acf_field_type"]',(function(){a.find(".f-row").attr("aria-hidden",!0),t()})),e(".ae-config-wrapper").on("click",".ae-config-nav a",(function(a){a.preventDefault(),e(".ae-config-nav li").attr("aria-selected",!1),e(this).closest("li").attr("aria-selected",!0),href=e(this).attr("href"),e(".ae-config-content").attr("aria-hidden",!0),e(href).attr("aria-hidden",!1)}))})),jQuery(window).on("load",(function(){const e=window.location.search;1==new URLSearchParams(e).get("activate-ae")&&(console.log("in if"),jQuery(".activate-license.anywhere-elementor a").click())}));